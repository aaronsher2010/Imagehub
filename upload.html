<script>
  const form = document.getElementById('uploadForm');
  const status = document.getElementById('uploadStatus');

  form.addEventListener('submit', async e => {
    e.preventDefault();
    const file = document.getElementById('imageUpload').files[0];
    if (!file) return alert('Please select an image.');

    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', 'YOUR_UPLOAD_PRESET'); // replace with your preset

    try {
      const res = await fetch('https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload', { 
        method: 'POST',
        body: formData
      });
      const data = await res.json();
      // Save URL in localStorage for homepage carousel
      const stored = JSON.parse(localStorage.getItem('uploadedImages')) || [];
      stored.push({ src: data.secure_url });
      localStorage.setItem('uploadedImages', JSON.stringify(stored));

      status.textContent = '✅ Upload successful!';
      form.reset();
    } catch (err) {
      console.error(err);
      status.textContent = '❌ Upload failed!';
    }
  });
</script>
