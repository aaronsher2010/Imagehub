<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ImageHub - Home</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Navbar -->
  <nav>
    <div class="logo">ImageHub</div>
    <ul>
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="upload.html">Upload</a></li>
    </ul>
    <input type="text" id="searchInput" placeholder="Search images...">
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div>
      <h1>Welcome to ImageHub</h1>
      <p>Upload, browse, and explore high-quality wallpapers.</p>
    </div>
  </section>

  <!-- Carousel Section -->
  <section class="featured-section">
    <h2>Featured Images</h2>
    <div class="carousel">
      <button class="carousel-btn left" onclick="moveSlide(-1)">&#10094;</button>
      <div class="carousel-container" id="carouselSlide"></div>
      <button class="carousel-btn right" onclick="moveSlide(1)">&#10095;</button>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>© 2025 ImageHub | Built with ❤️ by Aaron</p>
  </footer>

  <script>
    const slideContainer = document.getElementById('carouselSlide');
    let slides = [];
    let currentSlide = 0;
    let autoSlide;

    function showSlide(index) {
      if (!slides.length) return;
      slides.forEach(slide => slide.style.display = 'none');
      slides[index].style.display = 'block';
    }

    function moveSlide(n) {
      if (!slides.length) return;
      currentSlide = (currentSlide + n + slides.length) % slides.length;
      showSlide(currentSlide);
    }

    // Load image URLs from localStorage
    const storedImages = JSON.parse(localStorage.getItem('uploadedImages')) || [];

    // Default placeholders if no uploads exist
    const defaultImages = [
      'https://via.placeholder.com/800x400/1a1a1a/ffffff?text=Wallpaper+1',
      'https://via.placeholder.com/800x400/222222/ffffff?text=Wallpaper+2',
      'https://via.placeholder.com/800x400/333333/ffffff?text=Wallpaper+3'
    ];

    const allImages = storedImages.length ? storedImages.map(img => img.src) : defaultImages;

    // Build carousel
    allImages.forEach(url => {
      const img = document.createElement('img');
      img.src = url;
      img.classList.add('carousel-img');
      slideContainer.appendChild(img);
    });

    slides = document.querySelectorAll('.carousel-img');
    showSlide(currentSlide);

    // Auto-slide every 5 seconds
    autoSlide = setInterval(() => moveSlide(1), 5000);

    // Touch-swipe support
    let startX = 0;
    slideContainer.addEventListener('touchstart', e => startX = e.touches[0].clientX);
    slideContainer.addEventListener('touchend', e => {
      const endX = e.changedTouches[0].clientX;
      if (startX - endX > 50) moveSlide(1);   // swipe left → next
      if (endX - startX > 50) moveSlide(-1);  // swipe right → previous
    });

    // Optional: Search filter
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.toLowerCase();
      slides.forEach(img => {
        img.style.display = img.src.toLowerCase().includes(filter) ? 'block' : 'none';
      });
    });
  </script>

</body>
</html>
